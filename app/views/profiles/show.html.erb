<main class="profile">
  <section class="profile-card">
    <% if @user.profile.profile_photo.attached? %>
      <%= image_tag @user.profile.profile_photo.variant(resize_to_limit: [150, 150]), alt: 'Profile Photo', class: 'profile-photo' %>
    <% else %>
      <%= image_tag 'profile/default_photo.png', size: '150x150', alt: 'Profile Photo', class: 'profile-photo' %>
    <% end %>
    <section class="profile-information">
      <section class="profile-text">
        <h2><%= @user.name %></h2>
        <p class="biography"><%= @user.profile.biography %></p>
      </section>
      <section id="friend-button">
        <% if @not_current_user_profile %>
          <% if !@user_relationship || @user_relationship.status == 1 %>
            <%= link_to 'Send friend request', send_friend_request_path(@user), method: :post %>
          <% elsif @user_relationship.status == 0 && @user_action %>
            <p>Pending invite</p>
            <%= link_to 'Cancel friend request', cancel_friend_request_path(@user), method: :post %>
          <% elsif @user_relationship.status == 0 && !@user_action %>
            <%= link_to 'Accept friend request', accept_friend_request_path(@user), method: :post %>
          <% elsif @user_relationship.status == 2 %>
            <p>You are friends</p>
            <%= link_to 'Remove friend', remove_friend_path(@user), method: :delete %>
          <% end %>
        <% else %>
          <%= link_to 'Edit Profie', edit_profile_path %>
        <% end %>
      </section>
    </section>
  </section>
  <section class="profile-posts">
    <% @posts.each do |post| %>
      <%= render partial: 'posts/post', locals: { post: post }%>
    <% end %>
  </section>
</main>
